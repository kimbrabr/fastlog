# FastLogD

‚ö° –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π systemd-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π logging-–¥–µ–º–æ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π JSON, sampling –∏ gzip-—Ä–æ—Ç–∞—Ü–∏–∏.

## üìå –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π –ª–æ–≥–≥–µ—Ä, —Å–ø–æ—Å–æ–±–Ω—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å ‚â•500k —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ —á–µ—Ä–µ–∑ Unix-socket, —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ CPU –∏ RAM.

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü—Ä–∏—ë–º –ª–æ–≥–æ–≤ –ø–æ Unix-—Å–æ–∫–µ—Ç—É `/tmp/fastlogd.sock`
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-–ª–æ–≥–∏
- –°–∂–∞—Ç–∏–µ `gzip` + —Ä–æ—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É
- –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤: `/var/log/fastlog/YYYYMMDD_HHMMSS.log.gz`
- `fastlogd.conf`: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ max_size, max_files
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ `SIGUSR1` –¥–ª—è `reopen`
- CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `fastlogctl`
- systemd unit: `fastlogd.service`

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚â•500 000 msg/sec (`flood_test`, payload 100 B)
- CPU <1%, RAM <50MB

| –¢–µ—Å—Ç | RPS | RSS | CPU |
|------|-----|-----|-----|
| `flood_test` | 500k msg/sec | ~47MB | ~0.7% |

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- mmap + lock-free SPSC ring-buffer
- –ü–æ—Ç–æ–∫-–ø–∏—Å–∞—Ç–µ–ª—å + –ø–æ—Ç–æ–∫-—Å–∂–∞—Ç–∏—è (gzip)
- –í–≤–æ–¥: Unix-socket ‚Üí –æ—á–µ—Ä–µ–¥—å ‚Üí gzip ‚Üí —Ñ–∞–π–ª

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

